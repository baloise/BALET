$(document).ready(function(){$("#searchInput").on("keyup",function(){var d,g,f,b,c,e;d=document.getElementById("searchInput");g=d.value.toUpperCase();f=document.getElementById("searchList");b=f.getElementsByClassName("searchRow");for(e=0;e<b.length;e++){c=b[e].getElementsByClassName("searchFor")[0];if(c.innerHTML.toUpperCase().indexOf(g)>-1){b[e].style.display=""}else{b[e].style.display="none"}}});$(".userHeader").each(function(){$(this).click(function(){var a=$(this).attr("userID");$(".userContent").each(function(){if($(this).attr("userID")==a){$(this).slideToggle("fast")}else{if($(this).attr("userID")!=a){if($(this).css("display")!="none"){$(this).slideUp("fast")}}}})})});$("#addUser").click(function(b){b.preventDefault();var a="";var c=$("#usrFormBkey").val();var d=$("#usrFormGroup").val();if(c.length!=7){a=a+"<li>"+translate[153]+"</li>"}if(!d){a=a+"<li>"+translate[154]+"</li>"}if(a){$("#errorText").html(a);$("#errorAlert").slideDown("fast")}else{$(this).prop("disabled",true);$("#errorAlert").slideUp("fast");$.ajax({method:"POST",url:"./modul/benutzerverwaltung/call/modifyUser.php",data:{action:"add",bkey:c,group:d},success:function(e){if(e){$("#errorText").html(e);$("#errorAlert").slideDown("fast")}else{$(".addUserInput").val("");$("#successText").html(translate[101]);$("#addUserModal").modal("toggle");$("#successAlert").slideDown("fast").delay(1000).slideUp("fast",function(){$("#pageContent").load("modul/benutzerverwaltung/benutzerverwaltung.php",function(){$(".loadScreen").fadeTo("fast",0,function(){$("#pageContents").fadeTo("fast",1)})})})}}})}});$(".fSave").each(function(){$(this).click(function(a){var e=$(this);a.preventDefault();e.prop("disabled",true);var f="";var i=$(this).attr("userID");var d=$("#"+i+"_fFirstname").val();var c=$("#"+i+"_fLastname").val();var j=$("#"+i+"_fGroup").val();var h=$("#"+i+"_fMail").val();var b=$("#"+i+"_fLanguage").val();var g=$("#"+i+"_fSemester").val();if(j.length<=0){f=f+"<li>"+translate[154]+"</li>"}if(h.length<=0){f=f+"<li>"+translate[255]+" "+translate[95]+"</li>"}if(f){$("#errorText").html(f);$("#errorAlert").slideDown("fast");e.prop("disabled",false)}else{$("#errorAlert").slideUp("fast");$.ajax({method:"POST",url:"./modul/benutzerverwaltung/call/modifyUser.php",data:{action:"change",userID:i,fFirstname:d,fLastname:c,fGroup:j,fMail:h,fLanguage:b,fSemester:g},success:function(k){if(k){$("#errorText").html(k);$("#errorAlert").slideDown("fast");e.prop("disabled",false)}else{$(".addUserInput").val("");$("#successText").html(translate[101]);$("#successAlert").slideDown("fast").delay(1000).slideUp("fast");e.prop("disabled",false)}}})}})});$(".fFirstname").each(function(){$(this).on("keyup",function(){var a=$(this).attr("userID");$("#"+a+"_FNameHeader").html($(this).val()+" "+$("#"+a+"_fLastname").val())})});$(".fLastname").each(function(){$(this).on("keyup",function(){var a=$(this).attr("userID");$("#"+a+"_FNameHeader").html($("#"+a+"_fFirstname").val()+" "+$(this).val())})});$(".fGroup").each(function(){$(this).on("change",function(){var a=$(this).attr("userID");$("#"+a+"_FGroupHeader").html($(this).find("option:selected").text())})});$(".fLogin").each(function(){$(this).click(function(a){a.preventDefault();var c=$(this).attr("userID");var b=$(this).attr("bkey");$.ajax({method:"POST",url:"./modul/benutzerverwaltung/call/relogin.php",data:{bkey:b},success:function(d){if(d){alert(d)}else{$("body").fadeOut("slow",function(){window.location.href="index.php?page=dashboard&adm=true"})}}})})});$(".fDelete").each(function(){$(this).click(function(a){a.preventDefault();var c=$(this).attr("userID");var b=$(this).attr("bkey");$("#warningText").html("<strong>"+translate[97]+"</strong> "+translate[98]+": "+b);$("#warningAlert").slideDown("fast");$("#warningButton").slideDown("fast");$("#warningButton").click(function(d){if(c){$(this).prop("disabled",true);d.preventDefault();$.ajax({method:"POST",url:"./modul/benutzerverwaltung/call/modifyUser.php",data:{action:"delete",userid:c},success:function(e){if(e){alert(e)}else{$("#warningAlert").slideUp("fast");$("#warningButton").prop("disabled",false);$("#"+c+"_FUserRow").slideUp("slow",function(){$("#"+c+"_FUserRow").remove()})}}})}})})})});